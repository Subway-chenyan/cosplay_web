# Cosplay 视频数据库项目开发规范

## 项目概述

这是一个专业的中国cosplay舞台剧视频数据库平台，使用Django + React技术栈构建。

### 技术栈
- **后端**: Django 4.2.7 + DRF 3.14.0 + PostgreSQL
- **前端**: React 18.3.1 + TypeScript + Vite + Ant Design
- **部署**: Docker + Docker Compose

## 项目结构

```
cosplay_web/
├── backend/              # Django 后端
│   ├── cosplay_api/      # 主项目配置
│   ├── apps/             # 业务应用模块
│   │   ├── videos/       # 视频管理
│   │   ├── groups/       # 社团管理
│   │   ├── competitions/ # 比赛管理
│   │   ├── tags/         # 标签管理
│   │   ├── awards/       # 奖项管理
│   │   └── users/        # 用户管理
│   └── requirements.txt
├── frontend/             # React 前端
│   ├── src/
│   │   ├── components/   # 通用组件
│   │   ├── pages/        # 页面组件
│   │   ├── services/     # API 服务
│   │   ├── store/        # Redux 状态管理
│   │   ├── types/        # TypeScript 类型
│   │   └── utils/        # 工具函数
│   └── package.json
└── docker-compose.yml
```

## 代码规范

### 后端 (Django)
- 只保留核心模型：User（仅管理员/编辑）、Video、Group、Tag、Competition、Award、AwardRecord
- 不包含剧目、收藏、评分、评论、观看记录等模型
- 模型类使用 PascalCase: `Video`, `Group`
- 变量/函数使用 snake_case: `video_title`, `get_video_list`
- URL 使用 kebab-case: `video-list`, `group-detail`
- 必须包含 verbose_name 和 `__str__` 方法
- 使用 DRF ViewSet 和 Serializer
- 遵循 RESTful API 设计原则

### 前端 (React)
- 组件使用 PascalCase: `VideoCard`, `GroupList`
- 变量/函数使用 camelCase: `videoTitle`, `getVideoList`
- 使用 TypeScript 强类型
- 组件必须定义 Props 接口
- 优先使用函数组件和 Hooks

## API 响应格式

### 成功响应
```json
{
  "code": 200,
  "message": "success",
  "data": { ... }
}
```

### 分页响应
```json
{
  "code": 200,
  "message": "success",
  "data": {
    "count": 100,
    "next": "http://api.example.com/videos/?page=3",
    "previous": "http://api.example.com/videos/?page=1",
    "results": [...]
  }
}
```

### 错误响应
```json
{
  "code": 400,
  "message": "参数错误",
  "errors": {
    "title": ["这个字段是必需的。"]
  }
}
```

## 核心业务模型

### 视频 (Video)
- bv_number: B站BV号
- title: 视频标题
- url: 视频链接
- thumbnail: 封面图
- description: 描述
- upload_date: 上传日期
- performance_date: 表演日期

### 社团 (Group)
- name: 社团名称
- logo: 社团标志
- founded_date: 成立日期
- description: 简介

### 比赛 (Competition)
- name: 比赛名称
- year: 举办年份
- description: 比赛描述

### 奖项 (Award)
- name: 奖项名称
- competition: 所属比赛
- level: 奖项级别
- winner_count: 获奖数量

### 用户 (User)
- 仅管理员/编辑，无注册功能

## 开发要求

- 后端使用 Django ORM 进行数据库操作
- 只为核心模型编写序列化器和ViewSet
- 使用 django-filter 实现过滤功能
- 添加适当的权限控制
- 前端使用 TypeScript 严格模式
- 组件支持 loading 和 error 状态
- 遵循项目的命名规范

请始终遵循这些规范进行开发，确保代码质量和项目的可维护性。
alwaysApply: false
---
